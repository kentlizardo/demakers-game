[gd_scene load_steps=16 format=3 uid="uid://de15s0303xtvp"]

[ext_resource type="Script" path="res://scenes/game/main_player_body.gd" id="1_1m488"]
[ext_resource type="Script" path="res://scenes/game/player/main_player_bind.gd" id="1_vs0wa"]
[ext_resource type="Script" path="res://scenes/game/player/combat/player_loadout.gd" id="2_q2hih"]
[ext_resource type="Script" path="res://scenes/game/combat/weapon_module.gd" id="3_u5816"]
[ext_resource type="PackedScene" uid="uid://c2iomocmpvak2" path="res://packs/demo/consoles/zero_weapon.tscn" id="4_4ldym"]
[ext_resource type="PackedScene" uid="uid://o734qpui6bbi" path="res://packs/demo/consoles/test_weapon.tscn" id="5_jxg6g"]
[ext_resource type="Script" path="res://scenes/game/player/ui/cabinet/cabinet_view.gd" id="6_equsf"]
[ext_resource type="PackedScene" uid="uid://bv1700p8ux00t" path="res://packs/demo/consoles/zero_sprite.tscn" id="6_lwnbq"]
[ext_resource type="Script" path="res://scenes/game/player/combat/player_combat_entity.gd" id="6_r25b7"]

[sub_resource type="Resource" id="Resource_h7kf0"]
script = ExtResource("3_u5816")
weapon_template = ExtResource("4_4ldym")

[sub_resource type="Resource" id="Resource_3wxgc"]
script = ExtResource("2_q2hih")
console_template = ExtResource("6_lwnbq")
modules = Array[Resource("res://scenes/game/combat/module.gd")]([SubResource("Resource_h7kf0")])

[sub_resource type="Resource" id="Resource_pi1sg"]
script = ExtResource("3_u5816")
weapon_template = ExtResource("5_jxg6g")

[sub_resource type="Resource" id="Resource_xdijn"]
script = ExtResource("2_q2hih")
console_template = ExtResource("6_lwnbq")
modules = Array[Resource("res://scenes/game/combat/module.gd")]([SubResource("Resource_pi1sg")])

[sub_resource type="Resource" id="Resource_61uek"]
script = ExtResource("2_q2hih")
modules = Array[Resource("res://scenes/game/combat/module.gd")]([])

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_qchby"]

[node name="MainLevel" type="Node3D"]

[node name="CSGBox3D" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.447449, -0.462402, -0.0213013)
use_collision = true
size = Vector3(14.7428, 0.0751953, 13.4789)

[node name="MainPlayerBind" type="Node" parent="." node_paths=PackedStringArray("body", "combat_entity", "cabinet_view")]
script = ExtResource("1_vs0wa")
body = NodePath("PlayerCE/MainPlayerBody")
combat_entity = NodePath("PlayerCE")
cabinet_view = NodePath("MainPlayerView/CabinetView")
initial_loadouts = Array[ExtResource("2_q2hih")]([SubResource("Resource_3wxgc"), SubResource("Resource_xdijn"), SubResource("Resource_61uek")])

[node name="PlayerCE" type="Node" parent="MainPlayerBind" node_paths=PackedStringArray("body")]
script = ExtResource("6_r25b7")
body = NodePath("MainPlayerBody")

[node name="MainPlayerBody" type="CharacterBody3D" parent="MainPlayerBind/PlayerCE" node_paths=PackedStringArray("camera_pivot", "weapon_pivot")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 2, 0)
script = ExtResource("1_1m488")
camera_pivot = NodePath("MainCameraPivot")
weapon_pivot = NodePath("WeaponPivot")

[node name="CollisionShape3D" type="CollisionShape3D" parent="MainPlayerBind/PlayerCE/MainPlayerBody"]
shape = SubResource("CapsuleShape3D_qchby")

[node name="MainCameraPivot" type="Node3D" parent="MainPlayerBind/PlayerCE/MainPlayerBody"]

[node name="WeaponPivot" type="Node3D" parent="MainPlayerBind/PlayerCE/MainPlayerBody"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -2)

[node name="MainPlayerView" type="Control" parent="MainPlayerBind"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="TargetScreen" type="ReferenceRect" parent="MainPlayerBind/MainPlayerView"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
border_color = Color(1, 1, 1, 1)
border_width = 2.0

[node name="CabinetView" type="Control" parent="MainPlayerBind/MainPlayerView" node_paths=PackedStringArray("target_region")]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("6_equsf")
target_region = NodePath("../TargetScreen")

[node name="TestEntity" type="Node" parent="."]
